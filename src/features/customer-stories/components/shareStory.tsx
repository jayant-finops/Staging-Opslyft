"use client";

import { usePathname } from "next/navigation";
import { useEffect, useState } from "react";
// import { Linkedin, Twitter, Facebook, Link as LinkIcon, Check } from "lucide-react";

export default function ShareStorySection() {
  const pathname = usePathname();
  const [url, setUrl] = useState(""); // initially empty
  const [copied, setCopied] = useState(false);

  useEffect(() => {
    // ✅ runs only on client
    setUrl(window.location.origin + pathname);
  }, [pathname]);

  const handleCopy = async () => {
    if (!url) return;
    await navigator.clipboard.writeText(url);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  if (!url) return null; // ✅ don't render links until url is ready

  const encodedUrl = encodeURIComponent(url);
  const title = encodeURIComponent("Check out this customer story!");

  const shareLinks = {
    linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`,
    twitter: `https://twitter.com/intent/tweet?url=${encodedUrl}&text=${title}`,
    facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`,
  };

  return (
      <div className="hidden sm:flex items-center gap-4 mt-8 justify-end">
        <span className="text-[#343434] text-[14px] mr-1" style={{ fontFamily: '"IBM Plex Sans", sans-serif' }} >Share the Story</span>
        <a href={shareLinks.linkedin} target="_blank" rel="noopener noreferrer" className="hover:text-blue-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M17.8125 0H1.3125C0.964403 0 0.630564 0.138281 0.384422 0.384422C0.138281 0.630564 0 0.964403 0 1.3125V17.8125C0 18.1606 0.138281 18.4944 0.384422 18.7406C0.630564 18.9867 0.964403 19.125 1.3125 19.125H17.8125C18.1606 19.125 18.4944 18.9867 18.7406 18.7406C18.9867 18.4944 19.125 18.1606 19.125 17.8125V1.3125C19.125 0.964403 18.9867 0.630564 18.7406 0.384422C18.4944 0.138281 18.1606 0 17.8125 0ZM18 17.8125C18 17.8622 17.9802 17.9099 17.9451 17.9451C17.9099 17.9802 17.8622 18 17.8125 18H1.3125C1.26277 18 1.21508 17.9802 1.17992 17.9451C1.14475 17.9099 1.125 17.8622 1.125 17.8125V1.3125C1.125 1.26277 1.14475 1.21508 1.17992 1.17992C1.21508 1.14475 1.26277 1.125 1.3125 1.125H17.8125C17.8622 1.125 17.9099 1.14475 17.9451 1.17992C17.9802 1.21508 18 1.26277 18 1.3125V17.8125ZM6.375 8.0625V14.0625C6.375 14.2117 6.31574 14.3548 6.21025 14.4602C6.10476 14.5657 5.96168 14.625 5.8125 14.625C5.66332 14.625 5.52024 14.5657 5.41475 14.4602C5.30926 14.3548 5.25 14.2117 5.25 14.0625V8.0625C5.25 7.91332 5.30926 7.77024 5.41475 7.66475C5.52024 7.55926 5.66332 7.5 5.8125 7.5C5.96168 7.5 6.10476 7.55926 6.21025 7.66475C6.31574 7.77024 6.375 7.91332 6.375 8.0625ZM14.625 10.6875V14.0625C14.625 14.2117 14.5657 14.3548 14.4602 14.4602C14.3548 14.5657 14.2117 14.625 14.0625 14.625C13.9133 14.625 13.7702 14.5657 13.6648 14.4602C13.5593 14.3548 13.5 14.2117 13.5 14.0625V10.6875C13.5 10.1405 13.2827 9.61589 12.8959 9.22909C12.5091 8.8423 11.9845 8.625 11.4375 8.625C10.8905 8.625 10.3659 8.8423 9.97909 9.22909C9.5923 9.61589 9.375 10.1405 9.375 10.6875V14.0625C9.375 14.2117 9.31574 14.3548 9.21025 14.4602C9.10476 14.5657 8.96168 14.625 8.8125 14.625C8.66332 14.625 8.52024 14.5657 8.41475 14.4602C8.30926 14.3548 8.25 14.2117 8.25 14.0625V8.0625C8.25 7.91332 8.30926 7.77024 8.41475 7.66475C8.52024 7.55926 8.66332 7.5 8.8125 7.5C8.96168 7.5 9.10476 7.55926 9.21025 7.66475C9.31574 7.77024 9.375 7.91332 9.375 8.0625V8.26031C9.83857 7.86689 10.405 7.61427 11.0074 7.53223C11.6099 7.4502 12.2232 7.54218 12.7751 7.79733C13.327 8.05248 13.7944 8.46015 14.1222 8.97224C14.4499 9.48433 14.6244 10.0795 14.625 10.6875ZM6.75 5.4375C6.75 5.62292 6.69502 5.80418 6.592 5.95835C6.48899 6.11252 6.34257 6.23268 6.17127 6.30364C5.99996 6.37459 5.81146 6.39316 5.6296 6.35699C5.44775 6.32081 5.2807 6.23152 5.14959 6.10041C5.01848 5.9693 4.92919 5.80225 4.89301 5.6204C4.85684 5.43854 4.87541 5.25004 4.94636 5.07873C5.01732 4.90743 5.13748 4.76101 5.29165 4.658C5.44582 4.55498 5.62708 4.5 5.8125 4.5C6.06114 4.5 6.2996 4.59877 6.47541 4.77459C6.65123 4.9504 6.75 5.18886 6.75 5.4375Z" fill="black"/>
          </svg>
        </a>
        <a href={shareLinks.twitter} target="_blank" rel="noopener noreferrer" className="hover:text-sky-500">
          <svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M16.0366 16.7979L10.091 7.45478L15.9785 0.974775C16.0357 0.921645 16.0813 0.857178 16.1122 0.785478C16.1432 0.713778 16.1589 0.636417 16.1583 0.558321C16.1577 0.480225 16.1409 0.403106 16.1089 0.331874C16.0768 0.260641 16.0303 0.196858 15.9723 0.144584C15.9143 0.0923104 15.846 0.0526924 15.7718 0.0282525C15.6977 0.00381258 15.6192 -0.00491335 15.5415 0.00263022C15.4638 0.0101738 15.3884 0.0338214 15.3204 0.0720676C15.2523 0.110314 15.1929 0.16232 15.146 0.224775L9.46849 6.4704L5.54037 0.2979C5.48925 0.217532 5.41857 0.15146 5.33494 0.105875C5.25132 0.0602895 5.15748 0.0366855 5.06224 0.0372754H0.562241C0.461478 0.0373219 0.362577 0.0644342 0.275876 0.115778C0.189176 0.167122 0.117859 0.240813 0.0693803 0.329148C0.0209016 0.417483 -0.00295876 0.517218 0.000293056 0.617928C0.00354487 0.718639 0.0337895 0.816627 0.0878657 0.901651L6.03349 10.2448L0.145991 16.7248C0.0616356 16.8371 0.0223816 16.977 0.0359525 17.1168C0.0495234 17.2567 0.114937 17.3864 0.219322 17.4804C0.323707 17.5745 0.459506 17.626 0.600001 17.625C0.740496 17.6239 0.875514 17.5704 0.978491 17.4748L6.65599 11.2292L10.5841 17.4016C10.6352 17.482 10.7059 17.5481 10.7895 17.5937C10.8732 17.6393 10.967 17.6629 11.0622 17.6623H15.5622C15.663 17.6622 15.7619 17.6351 15.8486 17.5838C15.9353 17.5324 16.0066 17.4587 16.0551 17.3704C16.1036 17.2821 16.1274 17.1823 16.1242 17.0816C16.1209 16.9809 16.0907 16.8829 16.0366 16.7979ZM11.3707 16.5373L1.58693 1.16228H4.7538L14.5376 16.5373H11.3707Z" fill="black"/>
          </svg>
        </a>
        <a href={shareLinks.facebook} target="_blank" rel="noopener noreferrer" className="hover:text-blue-500">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M9.5625 0C7.67122 0 5.82241 0.560831 4.24986 1.61157C2.67732 2.66231 1.45167 4.15577 0.727906 5.90309C0.00414312 7.65041 -0.185226 9.57311 0.183745 11.4281C0.552716 13.283 1.46346 14.9869 2.8008 16.3242C4.13814 17.6615 5.84201 18.5723 7.69695 18.9413C9.5519 19.3102 11.4746 19.1209 13.2219 18.3971C14.9692 17.6733 16.4627 16.4477 17.5134 14.8751C18.5642 13.3026 19.125 11.4538 19.125 9.5625C19.122 7.02728 18.1136 4.59675 16.3209 2.80408C14.5283 1.01141 12.0977 0.00297736 9.5625 0ZM10.125 17.9813V11.625H12.5625C12.7117 11.625 12.8548 11.5657 12.9603 11.4602C13.0657 11.3548 13.125 11.2117 13.125 11.0625C13.125 10.9133 13.0657 10.7702 12.9603 10.6648C12.8548 10.5593 12.7117 10.5 12.5625 10.5H10.125V8.0625C10.125 7.61495 10.3028 7.18573 10.6193 6.86926C10.9357 6.55279 11.365 6.375 11.8125 6.375H13.3125C13.4617 6.375 13.6048 6.31574 13.7103 6.21025C13.8157 6.10476 13.875 5.96168 13.875 5.8125C13.875 5.66332 13.8157 5.52024 13.7103 5.41475C13.6048 5.30926 13.4617 5.25 13.3125 5.25H11.8125C11.0666 5.25 10.3512 5.54632 9.82377 6.07376C9.29632 6.60121 9 7.31658 9 8.0625V10.5H6.5625C6.41332 10.5 6.27025 10.5593 6.16476 10.6648C6.05927 10.7702 6 10.9133 6 11.0625C6 11.2117 6.05927 11.3548 6.16476 11.4602C6.27025 11.5657 6.41332 11.625 6.5625 11.625H9V17.9813C6.81584 17.8353 4.77388 16.8462 3.30535 15.2229C1.83682 13.5995 1.05669 11.4689 1.1297 9.28111C1.20271 7.09329 2.12314 5.01948 3.69663 3.49763C5.27011 1.97578 7.37347 1.12502 9.5625 1.12502C11.7515 1.12502 13.8549 1.97578 15.4284 3.49763C17.0019 5.01948 17.9223 7.09329 17.9953 9.28111C18.0683 11.4689 17.2882 13.5995 15.8197 15.2229C14.3511 16.8462 12.3092 17.8353 10.125 17.9813Z" fill="black"/>
          </svg>
        </a>
        {/* <button onClick={handleCopy} className="flex items-center gap-2 hover:text-gray-600">
          {copied ? <Check size={18} /> : <LinkIcon size={18} />}
          {copied ? "Copied!" : "Copy Link"}
        </button> */}
      </div>
  );
}
